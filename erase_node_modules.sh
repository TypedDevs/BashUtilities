#!/bin/sh
FOLDER=$1;

if [ $# -eq 0 ]
  then
    echo "No arguments were supplied so we will clean this folder: ${PWD}";
    FOLDER=$(pwd);
fi


lines=$(find ${FOLDER} -name "node_modules" -type d -prune | wc -l)
if [ $lines -eq 0 ]; then
	echo "\e[1mðŸ§¹ There is nothing to clean on the folder: ${FOLDER}";
	return 0;
fi



echo "+=======================================================================+";
echo "|\t\t\t   ðŸ—ƒ FILES AFFECTED   \t\t\t\t|";
echo "+=======================================================================+\n";
find ${FOLDER} -name "node_modules" -type d -prune -print0  | xargs -r -0 du -chs
echo "========================================================================\n";
printf "ðŸ—‘ Would you like to erase this folders (y/n): "
read -r option
  case $option in
     'y'|'Y')
        find ${FOLDER} -name "node_modules" -type d -prune -print0 | xargs -r -0 rm -rf
     ;;
     'n'|'N')
        return 0;
     ;;
     *)
        echo "â›” \e[1mInvalid option";
        return 1;
     ;;
  esac